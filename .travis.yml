language: python
python: '3.5'
git:
  submodules: false
before_install:
- sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
- git submodule update --init --recursive
install:
- pip install --upgrade pip
- pip install -r requirements.txt
script: sh run-tests.sh
env:
  matrix:
  - TOXENV=py27
  - TOXENV=py33
  - TOXENV=py35
  global:
  - secure: RVS8ycUKcYo5hJahJ/8yl2grt/fFJRCcESrWPrGz1M0+jHUCt9XJNNbBddKTItli36y/V8GjO8ZB/uYSNkZRLC95sfX7jQ17FzXY2Vf1DdsQIbF341uE10A2Wq5POKQNNwmDO4Xs0j2s1NfsxHSiW+fcZh45Utas22hG1BbWlaGoYezQqD26RX9BaL9ShjEVbqcgwwf1W3LndSIlzox5bkB/F86IN9GNUujyF9JYP7FPnSzFir5OQn7l9qCjoKq6o/LbfrCWS8hsKeQ2vQ+Fl8IaMeFQebN0h54pt00XcXwKOmAVavgczAznSgYv/iRURtByq7u1wpBP4oc1ovBEdPQ0miZ3QCov3Ui3jDOi9sY5dUwvmqaqumjS2z5Y5yeffxyNTq06OyefeSOYbDsy09/yr0DOE09yxzZymmAmSoszO6i4gR5eoUV7UcQaazTlrKuK5Ay0DmNPV0YwXzLVoJVeH3+rYYu7BQqq9jnyESXsJQlMz0K1ySCbSPY6wWdcT8j/EHG7wUkwvesBMqQKxxK5fINOfLlfUNQJiOS+6yWioqrpwdMC9GGFNwHfmxmneM9lpb/k1Ck3Zn7ir4tH3iFFAz2C07QlLkgdEEYM2HTg+biEU+11cp6pgqxMubVoFrzk6oDdYqC02NA7EXJgkK6iDz1Ui1hKzlF5dCup57A=
  - secure: iy8wQuT0EbPsitpRO0yJj1+9HmrMFAwhwZtdeWmYegxIBdTY8VTlam0x9R53FxSR+xfE9RrRjhaIv2TkgKbTJwxOW09x2NAtVQFRU2udV4F52R4Lq5ffn5IuwujHrmJudAdgp9qWVSBsABJ+/8wLKopbg104ABhozmMXr7sTAv5Ex8VX5ne2bmG1Dd8cuhsCwqT/2KR67bFdSdOgKEm7SoA8zAF+AmkJ4fnaEa7aO2MTG4EQG8e9G3ti3sdkW/n5bUieyeHCcOscqsgN4WLzAsqhk20QdmaF5RN2997JN2u4/BBEajODIHY2oJWwTcLkw127EqqCjLXgggVSz5WgKGKIC21M4FKseBhUaAroym9/TL4/2XlxC8qRwajajHbofzhpuAaPFj0sfq4YGtxGuY6SrNcYoJxtPpya/huYNhVw11EUws8s03dHNVAzmkTM8456mhhoo7kKd5Xe3cOWkFwIDbqxv1dJbw5ja6R7WI/0ODeGWiSVovRq4//Y9mtFXRMigvRAoYBpkCVHH4R/HmvHnG9hgWuQWRVqkds/ceeqkMP0oWHTMoMC8DwtPEpD/YVHjEmdQPWTybdrRcKYr0F3igYk4kYVyluWZFu7LAk5wi+LXPb1YCcwIvtlZv/ms4GkP72TKeidvaBlkReMQAm2hWbvpNLA5pMa1j0cxT0=
  - secure: VMjqlwYsrvzB0WyTcNaw8tUrpFtwyM7lf1KZYMty3/834mdOS3Ylu2h0VXFyRzWwlrQs81sCsZeGn0ENVZWKXRA0Fh8yFXv2prMM654l6cCL1dL0Wjq++LwYKlbDmSDR+gZI5pCjYispLQDDjxtHuPDn0y3WxsZgNo0gXPIci8MeOyx4xuf84FsC2bmTw4MHPEms4F7CXAHow8GkaRI3FhOFhrUA/s5iooBMykdb/caUAUaQalsvx6IzHZ+gf4E80kcYSn1KMpq95/L+isDA8qWBGa/niY++A7194tFMT4H/62cLxkqVfwnaifXDBS1IUxGb9717e0mwxzpcl5ZNJU+9Z9ESSknjGuaG/bzctbVicDZ7ZRxP2XziLspEXNfUmPZ5GLgSuvSVJA0xSnLJJnXPXS16JqaqW2c1N5buMHwFgJ++wNMa/iks0xrwVNEH1hy8gCyXtOqBJmIIpfqF8aymwWu5jHr15CvLQciBkrJ6lN8dZKDflNy4IlGcWW1u8X6C/G5j+XVnDmHcYjRhk8lRS/BRepuHeiFvgfvENeh2tgwxjrl/NQCs1aV0AS7NWKkZY/r2lPxT5LflY3typ5cJoSKDos5AkVL2gYh89WXlPh07mMITFqI7u9/YHhESqAN/eXMseM7fOhkyi85uWNZ4bqlRlAiM8zfgB3+v5No=
before_deploy:
- git describe --tags --match='v*'
deploy:
  provider: pypi
  user: ops
  password:
    secure: BV855ZvX9A+93Zn3o8OjbxJCJ4GiHjcPLzerd4TiuBHFh4e78i9UAcjCS4f1GjgdDe+QM+c/PKxHDI0Fgk/QcNSjAWNPyreY5qNfScLVbfD2GGWoi71Oqt2Yo82lGOGEQjbiOruJhbnnPTJ0tYCedtYsgy/aDAK5Asl9lpzlZm0mH+5FNJbyuPWr0KkWh3oR5kZ9yaO3kSAvTkn3gCS4E14s/n+qYCBQPaHHmDCDoE6J021kHTIqXQpTXY39Xoc1q5z+cJXJ01L2c/z/MDRbFrLvetglqD6sru9ZwSV1U9HUMbzuHv/+yrxydyuZoRE/IHfD8BfWkq+A8dGLytLs0R4EJlVS2bTBCGIIRQ+STWlFl8JjkG4ONkzeCWR0VppEKMQ41YGU7pexm7Z7c7dwxsTsOU5wV5TNS3jHJTvbkVBWtIrJSgN//DDTIwo3kP/ayeZ+Ndz29b17/MTkCScUXxU0QD5Qril3JMPEJo/O1g1pw7FcvaAWRkcGzTyi1Nt//6dqGWTvTX89WZ5F9mnwDN7PL3WPqVNIg/eZq2pQIdT6S6iiVdS9pmrFAJ+u51kV4Udedp70HlR6RxxWILCKmP3wiV9YA9NX8vk8woOoWq9WCJ89/oI2VcOPOvwnUXiLEbQqb89uqGpCzhwluKZrlSt+y6tHXsmu0P47MwDwpn0=
  distributions: bdist_wheel
  on:
    tags: true
    branch: master
sudo: false
addons:
  apt_packages:
  - pandoc
notifications:
  slack: craft-ai:ZNnQErHJhw40oKmphy3fNGza
  email:
  - ops@craft.ai
